{
  "subject": "Intermittent test failures when running parallel tests on BrowserStack",
  "description": "We have a suite of 87 Cypress tests that we run in parallel across 5 BrowserStack machines using our CI pipeline (CircleCI). About 30% of our CI runs fail, but the failing tests are different each time. When we re-run the same build, it usually passes.\n\nEnvironment:\n- Cypress 13.6.1\n- Node.js 18.19.0\n- browserstack-cypress-cli 1.28.1\n- CircleCI with 5 parallel containers\n- OS: Chrome 120 on Windows 11\n\nThe failures are always one of these patterns:\n1. `CypressError: Timed out retrying after 10000ms: expected '<button>' to be visible` — but the element is visible in the session video at that timestamp\n2. `cy.intercept() failed: Network request was not intercepted` — the API call completes before the intercept is registered\n3. `AssertionError: expected 3 to equal 5` — data-dependent assertions that depend on a shared test database\n\nOur browserstack.json config:\n```json\n{\n  \"parallels\": 5,\n  \"browsers\": [{\"browser\": \"chrome\", \"os\": \"Windows 11\", \"versions\": [\"latest\"]}],\n  \"run_settings\": {\n    \"cypress_config_file\": \"cypress.config.js\",\n    \"project_path\": \"./\"\n  }\n}\n```\n\nWe suspect shared state between parallel tests (they all hit the same staging database), but some of the timing failures seem like a BrowserStack infrastructure issue. We previously had `parallels: 3` and the failure rate was lower (~10%).\n\nWe need to determine whether this is a test isolation problem, a BrowserStack parallelism issue, or a Cypress configuration problem."
}
